{"version":3,"file":"mod_form.min.js","sources":["../src/mod_form.js"],"sourcesContent":["define(['jquery', 'core/templates', 'core/modal_factory', 'auth_mumie/mumie_server_config', 'core/ajax'],\n    function() {\n        const addServerButton = document.getElementById(\"id_add_server_button\");\n        const missingConfig = document.getElementsByName(\"mumie_missing_config\")[0];\n        let lmsSelectorUrl;\n        const serverController = (function() {\n            let serverStructure;\n            const serverDropDown = document.getElementById(\"id_server\");\n\n            return {\n                init: function(structure) {\n                    serverStructure = structure;\n                },\n                getSelectedServer: function() {\n                    const selectedServerName = serverDropDown.options[serverDropDown.selectedIndex].text;\n                    return serverStructure.find(server => server.name === selectedServerName);\n                },\n                disable: function() {\n                    serverDropDown.disabled = true;\n                    removeChildElems(serverDropDown);\n                }\n            };\n        })();\n\n        const problemSelectorController = (function() {\n            const problemSelectorButton = document.getElementById('id_prb_selector_btn');\n            const multiProblemSelectorButton = document.getElementById('id_multi_problem_selector_btn');\n            let problemSelectorWindow;\n            const mumieOrg = document.getElementsByName('mumie_org')[0].value;\n\n            /**\n             * Send a message to the problem selector window.\n             *\n             * Don't do anything if there is no problem selector window.\n             * @param {Object} response\n             */\n            function sendResponse(response) {\n                if (!problemSelectorWindow) {\n                    return;\n                }\n                problemSelectorWindow.postMessage(JSON.stringify(response), lmsSelectorUrl);\n            }\n\n            /**\n             * Send a success message to problem selector window\n             * @param {string} message\n             */\n            function sendSuccess(message = '') {\n                sendResponse({\n                    success: true,\n                    message: message\n                });\n            }\n\n            /**\n             * Send a failure message to problem selector window\n             * @param {string} message\n             */\n            function sendFailure(message = '') {\n                sendResponse({\n                    success: false,\n                    message: message\n                });\n            }\n\n            /**\n             * Add an event listener that accepts messages from LMS-Browser and updates the selected problem.\n             */\n            function addMessageListener() {\n                window.addEventListener('message', (event) => {\n                    if (event.origin !== lmsSelectorUrl) {\n                        return;\n                    }\n                    const importObj = JSON.parse(event.data);\n                    const isGraded = importObj.isGraded !== false;\n                    const worksheet = importObj.worksheet ?? null;\n                    try {\n                        courseController.setCourse(importObj.path_to_coursefile);\n                        langController.setLanguage(importObj.language);\n                        taskController.setSelection(importObj.link, importObj.language, importObj.name);\n                        taskController.setIsGraded(isGraded);\n                        worksheetController.setWorksheet(worksheet);\n                        sendSuccess();\n                        window.focus();\n                        displayProblemSelectedMessage();\n                    } catch (error) {\n                        sendFailure(error.message);\n                    }\n                  }, false);\n            }\n\n            /**\n             * Display a success message in Moodle that a problem was successfully selected.\n             */\n            function displayProblemSelectedMessage() {\n                require(['core/str', \"core/notification\"], function(str, notification) {\n                    str.get_strings([{\n                        'key': 'mumie_form_updated_selection',\n                        component: 'mod_mumie'\n                    }]).done(function(s) {\n                        notification.addNotification({\n                            message: s[0],\n                            type: \"info\"\n                        });\n                    }).fail(notification.exception);\n                });\n            }\n\n            return {\n                init: function() {\n                    const gradingType = taskController.getGradingType();\n                    problemSelectorButton.onclick = function() {\n                        problemSelectorWindow = window.open(\n                            'http://moodledev.mumie.net:8050/auth/mumie/problem_selector.php?'\n                                + 'org='\n                                + mumieOrg\n                                + '&serverUrl='\n                                + encodeURIComponent(serverController.getSelectedServer().urlprefix)\n                                + '&problemLang='\n                                + langController.getSelectedLanguage()\n                                + '&origin=' + encodeURIComponent(window.location.origin)\n                                + '&gradingType=' + gradingType\n                            , '_blank'\n                        );\n                    };\n\n                    window.onclose = function() {\n                        sendSuccess();\n                    };\n\n                    window.addEventListener(\"beforeunload\", function() {\n                        sendSuccess();\n                     }, false);\n\n                    addMessageListener();\n\n                    multiProblemSelectorButton.onclick = function(e) {\n                        e.preventDefault();\n                        problemSelectorWindow = window.open(\n                          lmsSelectorUrl\n                          + '/lms-problem-selector?'\n                          + \"serverUrl=\"\n                          + encodeURIComponent(serverController.getSelectedServer().urlprefix)\n                          + '&gradingType=all',\n                          \"_blank\",\n                          'toolbar=0,location=0,menubar=0'\n                        );\n                    };\n                },\n                disable: function() {\n                    problemSelectorButton.disabled = true;\n                }\n            };\n        })();\n\n        const courseController = (function() {\n            const courseNameElem = document.getElementById(\"id_mumie_course\");\n            const coursefileElem = document.getElementsByName(\"mumie_coursefile\")[0];\n\n\n            /**\n             * Update the hidden input field with the selected course's course file path\n             *\n             * @param {string} coursefile\n             */\n            function updateCoursefilePath(coursefile) {\n                coursefileElem.value = coursefile;\n                updateCourseName();\n            }\n\n            /**\n             * Update displayed course name.\n             */\n            function updateCourseName() {\n                const selectedCourse = courseController.getSelectedCourse();\n                const selectedLanguage = langController.getSelectedLanguage();\n                if (!selectedCourse || !selectedLanguage) {\n                    return;\n                }\n                courseNameElem.value = selectedCourse.name\n                    .find(translation => translation.language === selectedLanguage)?.value;\n            }\n\n            return {\n                init: function() {\n                    updateCourseName();\n                },\n                getSelectedCourse: function() {\n                    const courses = serverController.getSelectedServer().courses;\n                    return courses.find(course => course.coursefile === coursefileElem.value);\n                },\n                setCourse: function(courseFile) {\n                    updateCoursefilePath(courseFile);\n                }\n            };\n        })();\n\n        const langController = (function() {\n            const languageElem = document.getElementById(\"id_language\");\n            return {\n                getSelectedLanguage: function() {\n                    return languageElem.value;\n                },\n                setLanguage: function(lang) {\n                    languageElem.value = lang;\n                }\n            };\n        })();\n\n        const taskController = (function() {\n            const taskSelectionInput = document.getElementsByName(\"taskurl\")[0];\n            const nameElem = document.getElementById(\"id_name\");\n            const taskDisplayElement = document.getElementById(\"id_task_display_element\");\n            const isGradedElem = document.getElementById('id_mumie_isgraded');\n\n\n            /**\n             * Update the activity's name in the input field\n             * @param {string} name\n             */\n            function updateName(name) {\n                nameElem.value = name;\n            }\n\n            /**\n             * @param {string} localizedLink\n             */\n            function updateTaskDisplayElemement(localizedLink) {\n                taskDisplayElement.value = localizedLink;\n            }\n\n            /**\n             * Update task uri\n             * @param {string} link\n             * @param {string} language\n             */\n            function updateTaskUri(link, language) {\n                const localizedLink = link + \"?lang=\" + language;\n                taskSelectionInput.value = localizedLink;\n                updateTaskDisplayElemement(localizedLink);\n            }\n\n            /**\n             * Form inputs related to grades should be disabled, if the MUMIE Task is not graded.\n             */\n            function updateGradeEditability() {\n                const disabled = isGradedElem.value === '0';\n                document.getElementById('id_points').disabled = disabled;\n                document.getElementById('id_gradepass').disabled = disabled;\n                document.getElementById('id_duedate_enabled').disabled = disabled;\n                document.getElementById('id_gradecat').disabled = disabled;\n            }\n\n            return {\n                init: function() {\n                    updateTaskDisplayElemement(taskSelectionInput.value);\n                },\n                setSelection: function(link, language, name) {\n                    updateTaskUri(link, language);\n                    updateName(name);\n                },\n                setIsGraded: function(isGraded) {\n                    if (isGraded === null) {\n                        isGradedElem.value = null;\n                    }\n                    isGradedElem.value = isGraded ? '1' : '0';\n                    updateGradeEditability();\n                },\n                getGradingType: function() {\n                    const isGraded = isGradedElem.value;\n                    if (isGraded === '1') {\n                        return 'graded';\n                    } else if (isGraded === '0') {\n                        return 'ungraded';\n                    }\n                    return 'all';\n                }\n            };\n        })();\n\n\n        const multiTaskEditController = (function() {\n            const propertySelectionInputs = document.getElementsByName(\"mumie_multi_edit_property\");\n            const selectedTaskProperties = document.getElementsByName(\"mumie_selected_task_properties\")[0];\n            let selectedTaskProp = [];\n            const taskSelectionInputs = document.getElementsByName(\"mumie_multi_edit_task\");\n            const selectedTasks = document.getElementsByName(\"mumie_selected_tasks\")[0];\n            let selectedTaskIds = [];\n            const sectionInputs = document.getElementsByName(\"mumie_multi_edit_section\");\n\n            /**\n             * Push an element to an array, if it's not already included.\n             *\n             * @param {string[]} array\n             * @param {string} element\n             */\n            function pushIfNotExists(array, element) {\n                if (!array.includes(element)) {\n                    array.push(element);\n                }\n            }\n\n            /**\n             * Set selection listeners for other MUMIE Tasks in the course.\n             */\n            function setTaskSelectionListeners() {\n                taskSelectionInputs.forEach(function(checkbox) {\n                    checkbox.onchange = function() {\n                        if (!checkbox.checked) {\n                            selectedTaskIds = selectedTaskIds.filter(elem => elem !== checkbox.value);\n                        } else {\n                            selectedTaskIds.push(checkbox.value);\n                        }\n                        selectedTasks.value = JSON.stringify(selectedTaskIds);\n                    };\n                });\n            }\n\n            /**\n             * Set selection listeners for properties to apply to MUMIE Tasks in the course.\n             */\n            function setPropertySelectionListeners() {\n                propertySelectionInputs.forEach(function(checkbox) {\n                    checkbox.onchange = function() {\n                        if (!checkbox.checked) {\n                            selectedTaskProp = selectedTaskProp.filter(elem => elem !== checkbox.value);\n                        } else {\n                            selectedTaskProp.push(checkbox.value);\n                        }\n                        selectedTaskProperties.value = JSON.stringify(selectedTaskProp);\n                    };\n                });\n            }\n\n            /**\n             * Set selection listeners for entire section of MUMIE Tasks in the course\n             */\n            function setSectionSelectionListeners() {\n                sectionInputs.forEach(function(sectionCheckbox) {\n                    sectionCheckbox.onchange = function() {\n                        if (!sectionCheckbox.checked) {\n                            taskSelectionInputs.forEach(function(taskCheckbox) {\n                                if (taskCheckbox.getAttribute('section') === sectionCheckbox.value) {\n                                    taskCheckbox.checked = false;\n                                    selectedTaskIds = selectedTaskIds.filter(elem => taskCheckbox.value !== elem);\n                                }\n                            });\n                        } else {\n                            taskSelectionInputs.forEach(function(taskCheckbox) {\n                                if (taskCheckbox.getAttribute('section') === sectionCheckbox.value) {\n                                    taskCheckbox.checked = true;\n                                    pushIfNotExists(selectedTaskIds, taskCheckbox.value);\n                                }\n                            });\n                        }\n                        selectedTasks.value = JSON.stringify(selectedTaskIds);\n                    };\n                });\n            }\n\n            return {\n                init: function() {\n                    setTaskSelectionListeners();\n                    setPropertySelectionListeners();\n                    setSectionSelectionListeners();\n                },\n            };\n        })();\n\n        const worksheetController = (function() {\n            const worksheetElement = document.getElementById(\"id_mumie_worksheet\");\n            return {\n                setWorksheet: function(worksheet) {\n                    if (worksheet) {\n                        worksheetElement.setAttribute(\"value\", JSON.stringify(worksheet));\n                    } else {\n                        worksheetElement.removeAttribute(\"value\");\n                    }\n                }\n            };\n        })();\n\n        /**\n         *  Disable all dropdown menus and show notification\n         * @param {string} errorKey\n         */\n        function disableDropDownMenus(errorKey) {\n            require(['core/str', \"core/notification\"], function(str, notification) {\n                str.get_strings([{\n                    'key':  errorKey,\n                    component: 'mod_mumie'\n                }]).done(function(s) {\n                    notification.addNotification({\n                        message: s[0] + \"<b>\" + missingConfig.getAttribute(\"value\") + \"</b>\",\n                        type: \"problem\"\n                    });\n                }).fail(notification.exception);\n            });\n            serverController.disable();\n            problemSelectorController.disable();\n        }\n\n        return {\n            init: function(contextid, prbSelectorUrl) {\n                /* eslint-disable no-console */\n                console.log(\"CONTEXT ID:\", contextid);\n                lmsSelectorUrl = prbSelectorUrl;\n                const isEdit = document.getElementById(\"id_name\").getAttribute('value');\n                const serverStructure = JSON.parse(document.getElementsByName('mumie_server_structure')[0].value);\n                if (isEdit && !serverConfigExists()) {\n                    disableDropDownMenus('mumie_form_missing_server');\n                } else if (!serverStructure.length) {\n                    disableDropDownMenus('mumie_form_no_server_conf');\n                } else {\n                    serverController.init(serverStructure);\n                    courseController.init();\n                    taskController.init();\n                    multiTaskEditController.init();\n                    problemSelectorController.init();\n                }\n                multiTaskEditController.init();\n                if (addServerButton) {\n                    require(['auth_mumie/mumie_server_config'], function(MumieServer) {\n                        MumieServer.init(addServerButton, contextid);\n                    });\n                }\n            }\n        };\n\n        /**\n         * Remove all child elements of a given html element\n         * @param {Object} elem\n         */\n        function removeChildElems(elem) {\n            while (elem.firstChild) {\n                elem.removeChild(elem.firstChild);\n            }\n        }\n\n        /**\n         * Check, if the flag for an existing config is set\n         * @returns {boolean}\n         */\n        function serverConfigExists() {\n            return document.getElementsByName(\"mumie_missing_config\")[0].getAttribute(\"value\") === \"\";\n        }\n    });\n"],"names":["define","addServerButton","document","getElementById","missingConfig","getElementsByName","lmsSelectorUrl","serverController","serverStructure","serverDropDown","init","structure","getSelectedServer","selectedServerName","options","selectedIndex","text","find","server","name","disable","disabled","elem","firstChild","removeChild","removeChildElems","problemSelectorController","problemSelectorButton","multiProblemSelectorButton","problemSelectorWindow","mumieOrg","value","sendResponse","response","postMessage","JSON","stringify","sendSuccess","message","success","addMessageListener","window","addEventListener","event","origin","importObj","parse","data","isGraded","worksheet","courseController","setCourse","path_to_coursefile","langController","setLanguage","language","taskController","setSelection","link","setIsGraded","worksheetController","setWorksheet","focus","require","str","notification","get_strings","component","done","s","addNotification","type","fail","exception","error","sendFailure","gradingType","getGradingType","onclick","open","encodeURIComponent","urlprefix","getSelectedLanguage","location","onclose","e","preventDefault","courseNameElem","coursefileElem","updateCourseName","selectedCourse","getSelectedCourse","selectedLanguage","translation","_selectedCourse$name$","courses","course","coursefile","courseFile","languageElem","lang","taskSelectionInput","nameElem","taskDisplayElement","isGradedElem","updateTaskDisplayElemement","localizedLink","updateTaskUri","updateName","updateGradeEditability","multiTaskEditController","propertySelectionInputs","selectedTaskProperties","selectedTaskProp","taskSelectionInputs","selectedTasks","selectedTaskIds","sectionInputs","forEach","checkbox","onchange","checked","push","filter","sectionCheckbox","taskCheckbox","array","element","getAttribute","includes","worksheetElement","setAttribute","removeAttribute","disableDropDownMenus","errorKey","contextid","prbSelectorUrl","console","log","isEdit","length","MumieServer"],"mappings":"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"}